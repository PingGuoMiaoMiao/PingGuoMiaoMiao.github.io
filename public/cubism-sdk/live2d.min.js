// Cubism 2 占位符文件
// 我们使用 Cubism 3/4/5，这个文件只是为了满足 pixi-live2d-display 的检查
// 实际运行时使用的是 live2dcubismcore.min.js (Cubism 3/4/5)
(function() {
  'use strict';
  
  if (typeof window === 'undefined') return;
  
  // 创建基本的 Live2D 命名空间
  window.Live2D = window.Live2D || {};
  
  // 提供基本的版本信息
  window.Live2D.version = window.Live2D.version || '2.1.0';
  
  // 提供 getRuntime 方法
  window.Live2D.getRuntime = window.Live2D.getRuntime || function() {
    return {
      version: '2.1.0',
      // 返回一个基本的 runtime 对象
      isReady: function() { return false; }
    };
  };
  
  // 创建 AMotion 基类（pixi-live2d-display 需要这个）
  window.AMotion = window.AMotion || function() {
    // 占位符基类构造函数
    this.play = function() {};
    this.stop = function() {};
    this.setLoop = function() {};
    this.isFinished = function() { return true; };
    this.updateParam = function() {};
    this.setFadeIn = function() {};
    this.setFadeOut = function() {};
    this.loadMotion = function() { return new window.AMotion(); };
  };
  
  // 创建 Live2DMotion 占位符（继承自 AMotion）
  window.Live2DMotion = window.Live2DMotion || function() {
    // 占位符构造函数
    this.play = function() {};
    this.stop = function() {};
    this.setLoop = function() {};
    this.isFinished = function() { return true; };
    this.updateParam = function() {};
    this.setFadeIn = function() {};
    this.setFadeOut = function() {};
    this.onFinishHandler = null;
  };
  
  // 添加静态方法
  window.Live2DMotion.loadMotion = window.Live2DMotion.loadMotion || function() {
    return new window.Live2DMotion();
  };
  
  // 设置原型链（让 Live2DMotion 继承 AMotion）
  if (window.AMotion && !window.Live2DMotion.prototype.__proto__) {
    window.Live2DMotion.prototype = Object.create(window.AMotion.prototype);
    window.Live2DMotion.prototype.constructor = window.Live2DMotion;
  }
  
  // 创建 Live2DModel 占位符（如果需要）
  window.Live2DModel = window.Live2DModel || function() {
    // 占位符构造函数
    this.loadModel = function() {};
    this.update = function() {};
    this.draw = function() {};
  };
  
  // 创建 Live2DExpression 占位符（如果需要）
  window.Live2DExpression = window.Live2DExpression || function() {
    // 占位符构造函数
    this.setExpression = function() {};
  };
  
  // 创建 PhysicsHair 占位符（pixi-live2d-display 需要这个）
  window.PhysicsHair = window.PhysicsHair || function() {
    // 占位符构造函数
    this.setup = function() {};
    this.addSrcParam = function() {};
    this.addTargetParam = function() {};
    this.update = function() {};
  };
  
  // 添加 PhysicsHair 的静态属性（如果需要）
  if (window.PhysicsHair && !window.PhysicsHair.Src) {
    window.PhysicsHair.Src = {
      SRC_TO_X: 0,
      SRC_TO_Y: 1,
      SRC_TO_G_ANGLE: 2
    };
  }
  
  // 创建 Live2DModelWebGL 占位符（pixi-live2d-display 可能需要）
  window.Live2DModelWebGL = window.Live2DModelWebGL || {
    loadModel: function() {
      return {
        getModelContext: function() { return {}; },
        drawParamWebGL: {},
        getCanvasWidth: function() { return 0; },
        getCanvasHeight: function() { return 0; }
      };
    }
  };
  
  // 创建 PartsDataID 占位符（如果需要）
  window.PartsDataID = window.PartsDataID || {
    getID: function(id) { return id; }
  };
  
  console.log('✅ Cubism 2 占位符已初始化（实际使用 Cubism 3/4/5）');
  console.log('✅ 已定义: AMotion, Live2DMotion, PhysicsHair, Live2DModelWebGL');
})();

