---
import type { PostFrontmatter } from '../utils/markdown';

interface Props {
  href: string;
  frontmatter: PostFrontmatter;
}

const { href, frontmatter } = Astro.props;
---

<article class="neo-post-card neo-brutalist">
  {frontmatter.cover && (
    <img class="cover" src={frontmatter.cover} alt={frontmatter.title} loading="lazy" />
  )}
  <div class="content">
    <header>
      <span class="neo-badge" style="background-color: var(--neo-accent-pink); color: var(--neo-white);">
        {frontmatter.tag}
      </span>
      <h3><a href={href}>{frontmatter.title}</a></h3>
      {frontmatter.summary && <p class="desc">{frontmatter.summary}</p>}
    </header>
    <footer class="meta">
      <span class="date">{new Date(frontmatter.date).toLocaleDateString('zh-CN')}</span>
      <span>·</span>
      <span class="reading-time">{frontmatter.readingTime} 分钟</span>
    </footer>
  </div>
</article>

<style>
  .neo-post-card {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    transition: transform var(--neo-transition), box-shadow var(--neo-transition);
  }
  
  .neo-post-card:hover {
    box-shadow: 6px 6px 0 var(--neo-black);
    transform: translate(2px, 2px);
  }
  
  .cover {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: var(--neo-radius);
    border: 3px solid var(--neo-black);
    margin-bottom: 0.5rem;
  }
  
  .content {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .neo-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.15rem 0.6rem;
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
    border: 2px solid var(--neo-black);
    border-radius: var(--neo-radius);
    box-shadow: 4px 4px 0 var(--neo-black);
  }
  
  .neo-post-card h3 {
    margin: 0.4rem 0;
    font-size: 1.4rem;
    font-family: 'Bebas Neue', sans-serif;
  }
  
  .neo-post-card h3 a {
    color: var(--neo-black);
  }
  
  .neo-post-card h3 a:hover {
    color: var(--neo-primary-dark);
  }
  
  .desc {
    margin: 0;
    color: var(--neo-gray-700);
    font-size: 0.95rem;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .meta {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    color: var(--neo-gray-700);
    font-size: 0.9rem;
    margin-top: 0.5rem;
  }
  
  @media (max-width: 768px) {
    .neo-post-card {
      padding: 1rem;
      gap: 0.75rem;
    }
    
    .cover {
      height: 160px;
      border-width: 2px;
    }
    
    .neo-post-card h3 {
      font-size: 1.2rem;
    }
    
    .desc {
      font-size: 0.9rem;
    }
    
    .meta {
      font-size: 0.85rem;
    }
    
    .neo-badge {
      font-size: 0.75rem;
      padding: 0.1rem 0.5rem;
    }
  }
  
  @media (max-width: 480px) {
    .neo-post-card {
      padding: 0.75rem;
      gap: 0.5rem;
    }
    
    .cover {
      height: 140px;
    }
    
    .neo-post-card h3 {
      font-size: 1.1rem;
    }
    
    .desc {
      font-size: 0.85rem;
      -webkit-line-clamp: 3;
    }
    
    .meta {
      font-size: 0.8rem;
      flex-wrap: wrap;
    }
  }
</style>
